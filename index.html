<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Tra c·ª©u k·∫øt qu·∫£ ƒë·∫•u th·∫ßu thu·ªëc</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body>
    <div class="page-container">
        <!-- HEADER -->
        <header class="app-header">
            <div>
                <h1 class="app-title">
                    <i data-feather="file-text" class="icon-main"></i>
                    H·ªá th·ªëng tra c·ª©u Thu·ªëc tr√∫ng th·∫ßu (B·∫£n th·ª≠ nghi·ªám)
                </h1>
            </div>
        </header>

        <!-- LAYOUT CH√çNH: TR√ÅI SEARCH / PH·∫¢I DATA + CHARTS -->
        <div class="main-layout">
            <!-- C·ªòT TR√ÅI: SEARCH BAR -->
            <aside class="sidebar-search">
                <section class="search-section">
                    <custom-search-form></custom-search-form>
                </section>
            </aside>

            <main class="main-content">
            <!-- TABS NAVIGATION -->
            <div class="tabs-container">
                <div class="tabs-nav">
                    <button class="tab-btn active" data-tab="data-tab">
                        <i data-feather="database"></i>
                        <span>D·ªØ li·ªáu</span>
                    </button>
                    <button class="tab-btn" data-tab="charts-tab">
                        <i data-feather="bar-chart-2"></i>
                        <span>Bi·ªÉu ƒë·ªì th·ªëng k√™</span>
                    </button>
                </div>
                
                <!-- Export Button -->
                <button class="btn-export" id="export-excel-btn">
                    <i data-feather="download"></i>
                    <span>Xu·∫•t Excel</span>
                </button>
            </div>

            <!-- TAB 1: DATA TABLES -->
            <div id="data-tab" class="tab-content active">
                <!-- B·∫£ng DF1 -->
                <section class="data-section-vertical">
                    <div class="data-card">
                        <div class="data-card-header">
                            <div>
                                <h2 class="data-card-title">
                                    <span class="data-card-icon blue">
                                        <i data-feather="shield"></i>
                                    </span>
                                    D·ªØ li·ªáu chu·∫©n h√≥a
                                </h2>
                                <p class="data-card-desc">D·ªØ li·ªáu chi ti·∫øt v·ªõi ƒë·∫ßy ƒë·ªß c√°c tr∆∞·ªùng th√¥ng tin</p>
                            </div>
                            <span class="data-badge badge-green" id="df1-count">0</span>
                        </div>
                        <div class="table-wrapper">
                            <div class="table-scroll">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>M√£ TBMT</th>
                                            <th>Ch·ªß ƒë·∫ßu t∆∞</th>
                                            <th>S·ªë quy·∫øt ƒë·ªãnh ph√™ duy·ªát</th>
                                            <th>Ng√†y ph√™ duy·ªát</th>
                                            <th>Ng√†y h·∫øt hi·ªáu l·ª±c</th>
                                            <th>ƒê∆°n v·ªã t√≠nh</th>
                                            <th>S·ªë l∆∞·ª£ng</th>
                                            <th>ƒê∆°n gi√° (VND)</th>
                                            <th>Th√†nh ti·ªÅn (VND)</th>
                                            <th>T√™n thu·ªëc</th>
                                            <th>Ho·∫°t ch·∫•t/Th√†nh ph·∫ßn</th>
                                            <th>N·ªìng ƒë·ªô, h√†m l∆∞·ª£ng</th>
                                            <th>ƒê∆∞·ªùng d√πng</th>
                                            <th>D·∫°ng b√†o ch·∫ø</th>
                                            <th>Quy c√°ch</th>
                                            <th>Nh√≥m thu·ªëc</th>
                                            <th>GƒêKLH ho·∫∑c GPNK</th>
                                            <th>C∆° s·ªü s·∫£n xu·∫•t</th>
                                            <th>Xu·∫•t x·ª©</th>
                                            <th>Nh√† th·∫ßu</th>
                                            <th>H√¨nh th·ª©c l·ª±a ch·ªçn nh√† th·∫ßu</th>
                                        </tr>
                                    </thead>
                                    <tbody id="standard-data"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- B·∫£ng DF2 -->
                <section class="data-section-vertical">
                    <div class="data-card">
                        <div class="data-card-header">
                            <div>
                                <h2 class="data-card-title">
                                    <span class="data-card-icon purple">
                                        <i data-feather="layers"></i>
                                    </span>
                                    D·ªØ li·ªáu t·ªïng h·ª£p
                                </h2>
                                <p class="data-card-desc">D·ªØ li·ªáu g·ªôp t·ª´ nhi·ªÅu ngu·ªìn</p>
                            </div>
                            <span class="data-badge badge-amber" id="df2-count">0</span>
                        </div>
                        <div class="table-wrapper">
                            <div class="table-scroll">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>M√£ TBMT</th>
                                            <th>Ch·ªß ƒë·∫ßu t∆∞</th>
                                            <th>S·ªë quy·∫øt ƒë·ªãnh ph√™ duy·ªát</th>
                                            <th>Ng√†y ph√™ duy·ªát</th>
                                            <th>Ng√†y h·∫øt hi·ªáu l·ª±c</th>
                                            <th>ƒê∆°n v·ªã t√≠nh</th>
                                            <th>Kh·ªëi l∆∞·ª£ng</th>
                                            <th>ƒê∆°n gi√° (VND)</th>
                                            <th>Th√†nh ti·ªÅn (VND)</th>
                                            <th>T√™n h√†ng h√≥a</th>
                                            <th>Nh√£n hi·ªáu</th>
                                            <th>K√Ω m√£ hi·ªáu</th>
                                            <th>C·∫•u h√¨nh, t√≠nh nƒÉng k·ªπ thu·∫≠t</th>
                                            <th>Xu·∫•t x·ª©</th>
                                            <th>H√£ng s·∫£n xu·∫•t</th>
                                            <th>Nh√† th·∫ßu</th>
                                            <th>H√¨nh th·ª©c l·ª±a ch·ªçn nh√† th·∫ßu</th>
                                        </tr>
                                    </thead>
                                    <tbody id="extended-data"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- TAB 2: CHARTS -->
            <div id="charts-tab" class="tab-content">
                <section class="charts-section">
                    <div class="charts-header">
                        <div>
                            <h2 class="charts-title">
                                <i data-feather="activity" class="icon-main green"></i>
                                Th·ªëng k√™ & Ph√¢n t√≠ch
                            </h2>
                            <p class="charts-subtitle">T·ªïng h·ª£p theo c√°c ti√™u ch√≠ ƒë√£ l·ªçc.</p>
                        </div>
                    </div>
                    
                    <div class="charts-grid-4">
                        <!-- Chart 1: Price Histogram -->
                        <div class="chart-block">
                            <h3>Ph√¢n b·ªë ƒë∆°n gi√°</h3>
                            <canvas id="chart-price-histogram"></canvas>
                        </div>
                        
                        <!-- Chart 2: Price Boxplot -->
                        <div class="chart-block">
                            <h3>Boxplot ƒë∆°n gi√°</h3>
                            <canvas id="chart-price-boxplot"></canvas>
                        </div>
                        
                        <!-- Chart 3: Timeline Value -->
                        <div class="chart-block">
                            <h3>T·ªïng gi√° tr·ªã tr√∫ng th·∫ßu theo th√°ng</h3>
                            <canvas id="chart-timeline-value"></canvas>
                        </div>
                        
                        <!-- Chart 4: Value by Selection Method -->
                        <div class="chart-block">
                            <h3>T·ªïng gi√° tr·ªã tr√∫ng th·∫ßu theo h√¨nh th·ª©c LCNT</h3>
                            <canvas id="chart-selection-method"></canvas>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        </div>

        <!-- FOOTER -->
        <footer class="app-footer">
            ¬© 2025 H·ªá th·ªëng tra c·ª©u Thu·ªëc tr√∫ng th·∫ßu
        </footer>
    </div>

    <!-- README MODAL -->
    <div id="readme-modal" class="readme-modal">
        <div class="readme-overlay"></div>
        <div class="readme-content">
            <button class="readme-close" id="close-readme" aria-label="ƒê√≥ng">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>

            
            <div class="readme-header">
                <!-- <div class="readme-icon-header">üè•</div> -->
                <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi H·ªá th·ªëng tra c·ª©u Thu·ªëc tr√∫ng th·∫ßu</h1>
                <!-- <p class="readme-subtitle">Tra c·ª©u th√¥ng tin thu·ªëc tr√∫ng th·∫ßu t·∫°i Vi·ªát Nam</p> -->
            </div>

            <div class="readme-body">
                <section class="readme-section">
                    <h2>V·ªÅ ·ª©ng d·ª•ng</h2>
                    <p>H·ªá th·ªëng tra c·ª©u Thu·ªëc tr√∫ng th·∫ßu t·∫°i Vi·ªát Nam. D·ªØ li·ªáu ƒë∆∞·ª£c thu th·∫≠p v√† c·∫≠p nh·∫≠t t·ª´ <strong>H·ªá th·ªëng m·∫°ng ƒë·∫•u th·∫ßu qu·ªëc gia</strong> (<a href="https://muasamcong.mpi.gov.vn" target="_blank">muasamcong.mpi.gov.vn</a>) - n·ªÅn t·∫£ng ch√≠nh th·ª©c do B·ªô T√†i ch√≠nh qu·∫£n l√Ω.</p>
                </section>

                <section class="readme-section">
                    <h2>D·ªØ li·ªáu cung c·∫•p</h2>
                    <div class="readme-info-grid">
                        <div class="readme-info-card">
                            <div class="info-icon">üíä</div>
                            <h3>Th√¥ng tin thu·ªëc</h3>
                            <p>T√™n thu·ªëc, t√™n ho·∫°t ch·∫•t, n·ªìng ƒë·ªô, h√†m l∆∞·ª£ng, ƒë∆∞·ªùng d√πng, d·∫°ng b√†o ch·∫ø, quy c√°ch, nh√≥m thu·ªëc, s·ªë ƒëƒÉng k√Ω, c∆° s·ªü s·∫£n xu·∫•t, n∆∞·ªõc s·∫£n xu·∫•t</p>
                        </div>
                        <div class="readme-info-card">
                            <div class="info-icon">üì¶</div>
                            <h3>Th√¥ng tin s·∫£n ph·∫©m th·∫ßu</h3>
                            <p>ƒê∆°n v·ªã t√≠nh, s·ªë l∆∞·ª£ng, ƒë∆°n gi√° tr√∫ng th·∫ßu, th√†nh ti·ªÅn, nh√† th·∫ßu tr√∫ng th·∫ßu</p>
                        </div>
                        <div class="readme-info-card">
                            <div class="info-icon">üìã</div>
                            <h3>Th√¥ng tin th·∫ßu</h3>
                            <p>M√£ TBMT, ch·ªß ƒë·∫ßu t∆∞, t√™n g√≥i th·∫ßu, th·ªùi gian th·ª±c hi·ªán g√≥i th·∫ßu, ƒë·∫•u th·∫ßu qua m·∫°ng, gi√° g√≥i th·∫ßu, ng√†y ph√™ duy·ªát, s·ªë quy·∫øt ƒë·ªãnh ph√™ duy·ªát, h√¨nh th·ª©c l·ª±a ch·ªçn nh√† th·∫ßu, ph∆∞∆°ng th·ª©c l·ª±a ch·ªçn nh√† th·∫ßu</p>
                        </div>
                    </div>
                </section>

                <section class="readme-section">
                    <h2>M·ª•c ƒë√≠ch</h2>
                    <p>H·ªó tr·ª£ c∆° quan y t·∫ø, doanh nghi·ªáp d∆∞·ª£c tra c·ª©u th√¥ng tin thu·ªëc tr√∫ng th·∫ßu nhanh ch√≥ng t·ª´ ngu·ªìn d·ªØ li·ªáu ch√≠nh th·ªëng.</p>
                </section>
            </div>

            <div class="readme-footer">
                <label class="readme-checkbox">
                    <input type="checkbox" id="dont-show-checkbox">
                    <span>Kh√¥ng hi·ªÉn th·ªã l·∫°i l·∫ßn sau</span>
                </label>
                <button class="btn-readme-primary" id="got-it-btn">ƒê√£ hi·ªÉu</button>
            </div>
        </div>
    </div>

    <div id="readme-icon" class="readme-icon" style="display: none;">
        <button id="open-readme" title="Xem gi·ªõi thi·ªáu">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM11 15H9V9H11V15ZM11 7H9V5H11V7Z" fill="currentColor"/>
            </svg>
            <span>Gi·ªõi thi·ªáu</span>
        </button>
    </div>

    <div id="readme-icon" class="readme-icon" style="display: none;">
        <button id="open-readme" title="Xem gi·ªõi thi·ªáu">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM11 15H9V9H11V15ZM11 7H9V5H11V7Z" fill="currentColor"/>
            </svg>
            <span>Gi·ªõi thi·ªáu</span>
        </button>
    </div>

    <!-- Contact Icon -->
    <div id="contact-icon" class="contact-icon" style="display: none;">
        <button id="open-contact" title="Li√™n h·ªá">
            <span>Li√™n h·ªá</span>
        </button>
    </div>

    <!-- Contact Modal -->
    <div id="contact-modal" class="readme-modal">
        <div class="readme-overlay"></div>
        <div class="readme-content contact-content">
            <button class="readme-close" id="close-contact" aria-label="ƒê√≥ng">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>

            <div class="readme-header">
                <!-- <div class="readme-icon-header">üë•</div> -->
                <h1>Th√¥ng tin v·ªÅ ƒë·ªôi ng≈© ph√°t tri·ªÉn ·ª©ng d·ª•ng</h1>
                <!-- <p class="readme-subtitle">Th√¥ng tin v·ªÅ ƒë·ªôi ng≈© ph√°t tri·ªÉn ·ª©ng d·ª•ng</p> -->
            </div>

            <div class="readme-body">
                <section class="readme-section">
                    <h2>Gi·ªõi thi·ªáu</h2>
                    <!-- <p>·ª®ng d·ª•ng ƒë∆∞·ª£c ph√°t tri·ªÉn b·ªüi nh√≥m nghi√™n c·ª©u chuy√™n v·ªÅ ph√¢n t√≠ch d·ªØ li·ªáu y t·∫ø v√† ƒë·∫•u th·∫ßu c√¥ng, v·ªõi m·ª•c ti√™u ƒëem l·∫°i c√¥ng c·ª• tra c·ª©u minh b·∫°ch v√† hi·ªáu qu·∫£ cho c·ªông ƒë·ªìng.</p> -->
                </section>

                <section class="readme-section">
                    <h2>Th√†nh vi√™n</h2>
                    <div class="team-grid">
                        <!-- <div class="team-card">
                            <div class="team-avatar">üë®‚Äçüíª</div>
                            <h3>H·ªì Th·ªã Thanh Huy·ªÅn</h3>
                            <p class="team-role">Lead Developer</p>
                            <p class="team-desc">C√¥ b√© ng·ªß li b√¨</p>
                        </div> -->
                        <!-- <div class="team-card">
                            <div class="team-avatar">üë®‚Äçüíª</div>
                            <h3>H·ªì Th·ªã Thanh Huy·ªÅn</h3>
                            <p class="team-role">Lead Developer</p>
                            <p class="team-desc">Ch·ªãu tr√°ch nhi·ªám thi·∫øt k·∫ø h·ªá th·ªëng v√† ph√°t tri·ªÉn backend</p>
                        </div> -->
                        <!-- <div class="team-card">
                            <div class="team-avatar">üë©‚Äçüíª</div>
                            <h3>Tr·∫ßn Th·ªã B</h3>
                            <p class="team-role">Frontend Developer</p>
                            <p class="team-desc">Thi·∫øt k·∫ø giao di·ªán v√† tr·∫£i nghi·ªám ng∆∞·ªùi d√πng</p>
                        </div>
                        <div class="team-card">
                            <div class="team-avatar">üë®‚Äçüî¨</div>
                            <h3>L√™ VƒÉn C</h3>
                            <p class="team-role">Data Analyst</p>
                            <p class="team-desc">Ph√¢n t√≠ch v√† x·ª≠ l√Ω d·ªØ li·ªáu ƒë·∫•u th·∫ßu</p>
                        </div> -->
                    </div>
                </section>

                <section class="readme-section">
                    <h2>Th√¥ng tin li√™n h·ªá</h2>
                    <div class="contact-info">
                        <div class="contact-item">
                            <!-- <span class="contact-icon">üìß</span> -->
                            <!-- <div>
                                <strong>Email</strong>
                                <p>bidX@gmail.com</p>
                            </div> -->
                        </div>
                        <!-- <div class="contact-item">
                            <span class="contact-icon">üåê</span>
                            <div>
                                <strong>Website</strong>
                                <p><a href="https://example.com" target="_blank">example.com</a></p>
                            </div>
                        </div> -->
                        <!-- <div class="contact-item">
                            <span class="contact-icon">üì±</span>
                            <div>
                                <strong>GitHub</strong>
                                <p><a href="https://github.com/yourproject" target="_blank">github.com/yourproject</a></p>
                            </div>
                        </div> -->
                    </div>
                </section>
            </div>

            <!-- <div class="readme-footer" style="justify-content: flex-start;">
                <button class="btn-readme-primary" id="close-contact-btn">ƒê√≥ng</button>
            </div> -->
        </div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@sgratzl/chartjs-chart-boxplot@4.2.5/build/index.umd.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <script src="search-form.js"></script>
    <script src="script.js"></script>
    <script>
        feather.replace();
    </script>
    
    <script>
    // README Modal Logic
    (function() {
        const modal = document.getElementById('readme-modal');
        const icon = document.getElementById('readme-icon');
        const closeBtn = document.getElementById('close-readme');
        const gotItBtn = document.getElementById('got-it-btn');
        const openBtn = document.getElementById('open-readme');
        const dontShowCheckbox = document.getElementById('dont-show-checkbox');
        const overlay = document.querySelector('.readme-overlay');

        // Check if user has dismissed before (session-based)
        const hasSeenReadme = sessionStorage.getItem('hasSeenReadme');

        function showModal() {
            modal.classList.add('show');
            icon.style.display = 'none';
            document.body.style.overflow = 'hidden';
        }

        function hideModal() {
            modal.classList.remove('show');
            icon.style.display = 'block';
            document.body.style.overflow = '';
            
            // If "don't show again" is checked, save to localStorage
            if (dontShowCheckbox.checked) {
                localStorage.setItem('hideReadme', 'true');
            }
            
            // Mark as seen in this session
            sessionStorage.setItem('hasSeenReadme', 'true');
        }

        // Show modal on first load (if not permanently hidden)
        if (!hasSeenReadme && localStorage.getItem('hideReadme') !== 'true') {
            setTimeout(showModal, 500); // Delay 500ms for better UX
        } else {
            icon.style.display = 'block';
        }

        // Event listeners
        closeBtn.addEventListener('click', hideModal);
        gotItBtn.addEventListener('click', hideModal);
        overlay.addEventListener('click', hideModal);
        openBtn.addEventListener('click', showModal);

        // ESC key to close
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('show')) {
                hideModal();
            }
        });
    })();

    // Contact Modal Logic
    (function() {
        const contactModal = document.getElementById('contact-modal');
        const contactIcon = document.getElementById('contact-icon');
        const closeContactBtn = document.getElementById('close-contact');
        const closeContactBtn2 = document.getElementById('close-contact-btn');
        const openContactBtn = document.getElementById('open-contact');
        const contactOverlay = contactModal.querySelector('.readme-overlay');

        // Show contact icon when page loads
        contactIcon.style.display = 'block';

        function showContactModal() {
            contactModal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function hideContactModal() {
            contactModal.classList.remove('show');
            document.body.style.overflow = '';
        }

        openContactBtn.addEventListener('click', showContactModal);
        closeContactBtn.addEventListener('click', hideContactModal);
        // closeContactBtn2.addEventListener('click', hideContactModal);
        contactOverlay.addEventListener('click', hideContactModal);

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && contactModal.classList.contains('show')) {
                hideContactModal();
            }
        });
    })();

    </script>

    

</body>
</html>
